# C++ 对象创建方法

# 动态链接与静态链链接

静态注册：在应用程序启动时，JVM会加载指定路径下的原生方法表（JNI函数注册表），这个过程称为静态注册。在原生方法表中，包含了Java类中声明的native方法与本地方法的映射关系。
动态注册：在运行时，通过JNI函数JNIEnv::RegisterNatives，将Java类中的native方法与本地方法进行映射，这个过程称为动态注册。
二、实现过程
静态注册
步骤一：在Java类中声明native方法。
步骤二：使用javah工具生成原生方法表头文件（.h文件）。javah工具会自动扫描Java类中的native方法，并生成包含JNI函数签名的头文件。
步骤三：在C/C++代码中实现对应的本地方法，并在方法签名上添加与头文件中JNI函数签名相同的函数名前缀（即Java全类名方法名）。
步骤四：在应用程序启动时，JVM加载指定路径下的原生方法表头文件，完成静态注册。
动态注册
步骤一：在Java类中声明native方法。
步骤二：在C/C++代码中实现对应的本地方法，并在方法签名上添加与Java类中声明的方法相同的函数名前缀（即Java全类名方法名）。
步骤三：使用JNI函数JNIEnv::RegisterNatives将Java类中的native方法与本地方法进行映射。该函数需要传入一个包含映射关系的数组，数组中的每个元素表示一个native方法与本地方法的映射关系。
步骤四：在运行时调用JNIEnv::RegisterNatives函数完成动态注册。
三、区别
静态注册在应用程序启动时完成，而动态注册在运行时完成。因此，静态注册的方式更为高效，因为它避免了在运行时进行额外的注册操作。
动态注册的方式更为灵活，因为它允许在运行时修改或添加新的映射关系。而静态注册的方式则无法做到这一点。
动态注册需要手动编写JNI函数JNIEnv::RegisterNatives的调用代码，而静态注册则不需要。因此，动态注册的方式需要更多的代码和配置工作。
在实际应用中，选择静态注册还是动态注册应该根据具体的需求和场景来决定。如果应用程序需要高效地加载和运行原生方法，并且映射关系不需要在运行时修改或添加，那么静态注册是更好的选择。如果应用程序需要在运行时修改或添加新的映射关系，或者需要对原生方法的加载和运行进行更灵活的控制，那么动态注册是更好的选择。

# OpenGL 初次实践